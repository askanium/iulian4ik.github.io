<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Prototype Pattern &#8211; Programming For Kettles</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Programming and Data Science concepts explained in a simple and clear manner (hopefully).">
    <meta name="robots" content="all">
    <meta name="author" content="Iulian Gulea">
    <meta name="keywords" content="design-patterns">
    <link rel="canonical" href="http://iulian4ik.github.io/design-patterns/2016/04/20/js-prototype-pattern/">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for Programming For Kettles" href="/feed.xml" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/pixyll.css?201604201801" type="text/css">
    <link rel="stylesheet" href="/css/styles.css?201604201801" type="text/css">

    <!-- Fonts -->
    
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    
    

    <!-- MathJax -->
    

    <!-- Verifications -->
    
    

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Prototype Pattern">
    <meta property="og:description" content="Programming and Data Science concepts explained in a simple and clear manner (hopefully).">
    <meta property="og:url" content="http://iulian4ik.github.io/design-patterns/2016/04/20/js-prototype-pattern/">
    <meta property="og:site_name" content="Programming For Kettles">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@iulian4ik" />
    
    <meta name="twitter:title" content="Prototype Pattern" />
    <meta name="twitter:description" content="Programming and Data Science concepts explained in a simple and clear manner (hopefully)." />
    <meta name="twitter:url" content="http://iulian4ik.github.io/design-patterns/2016/04/20/js-prototype-pattern/" />

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">

    <script>window.BASEURL = "";</script>

    
    <script type="text/javascript">
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
       ga('create', 'UA-76433646-1', 'auto');
       ga('send', 'pageview');
    </script>
    
</head>

<body class="site">
  
	

  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="http://iulian4ik.github.io" class="site-title">Programming For Kettles</a>
      <nav class="site-nav">
        
    

    

    

    
        <a href="/about/">About</a>
    

    

    

    

    

    
        <a href="/bookster/">Bookster</a>
    

    

    
        <a href="/contact/">Say Hello</a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


      </nav>
      <div class="clearfix"></div>
      
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        


<div class="post-header mb2">
  <h1>Prototype Pattern</h1>
  <span class="post-meta">Apr 20, 2016</span><br>
  
  <span class="post-meta small">
  
    7 minute read
  
  </span>
</div>

<article class="post-content">
  <p>Recall how many times you wished there was a <code class="highlighter-rouge">Ctrl+C</code> and <code class="highlighter-rouge">Ctrl+V</code> possibility on paper, where there were blocks of text that needed to be written several times and you had to routinely copy the same text over and over… How cool would it be to have a possibility to somehow duplicate the block of text in your paper wherever you would like. The <strong>Prototype Pattern</strong> would come in handy in such situations.</p>

<p><strong>Prototype Pattern</strong> is a <em>creational pattern,</em> which means it can be used whenever you <em>create things</em> in your program.</p>

<p>Let’s start by first defining what a prototype is. According to wikipedia’s <a href="https://en.wikipedia.org/wiki/Prototype">article</a>:</p>

<blockquote>
  <p>A prototype is an early sample, model, or release of a product built to test a concept or process <strong>or to act as a thing to be replicated</strong> or learned from.</p>
</blockquote>

<p>At the heart of the Prototype pattern stays the prototype – which represents an object for which you can easily obtain a clone/copy. You can have as many prototypes as you want. When I started to grasp the concepts of design patterns, it was somehow unclear for me in what cases to use it. But its potential uses are widespread.</p>

<p>It is not news that humanity generates content at a continuously increasing pace. For instance, according to a post on <a href="http://aci.info/2014/07/12/the-data-explosion-in-2014-minute-by-minute-infographic/">ACI</a>, in 2014, facebook users shared nearly 2.5 million pieces of content and twitter users tweeted nearly 300,000 times <strong>each minute.</strong> That is a lot of content that is <em>created</em>, so there’s a lot of potential for using the Prototype pattern.</p>

<h2 id="real-world-offline-example">Real world offline example</h2>

<p>Imagine you are a writer. You’ve written a great book on <em>JavaScript</em> which was read by a lot of people. As we are all humans, sometimes we make mistakes and so did you – attentive readers spotted some typos in your book and let you know about them. Meanwhile, the language evolved and you would like to add some really cool examples of features that appeared in Javascript since you published your book. Now, ideally you would like to obtain a copy of your book that can be edited and not write the whole book anew.</p>

<h2 id="prototype-pattern-in-action">Prototype Pattern in action</h2>

<p>Imagine you write an app that generates geometric shapes. By clicking buttons, users can generate a <em>square, circle or triangle</em> shapes.</p>

<h4 id="before-applying-a-prototype-pattern">Before applying a prototype pattern</h4>

<p>You generate each shape on each click of a button.</p>

<h4 id="after-applying-a-prototype-pattern">After applying a prototype pattern</h4>

<p>You have 3 prototypes, one for a square, for a triangle and for a circle. And whenever the user presses a button to obtain a new shape, the corresponding prototype clones itself and returns a clone to the user.</p>

<h4 id="implementation">Implementation</h4>

<p>Javascript itself is a prototype based language, meaning that inheritance is performed by cloning existing objects that serve as prototypes. This makes the usage of prototype pattern in Javascript easier, as the language itself facilitates pattern’s underlying concepts.</p>

<p>The key to implementing a prototype pattern is having a possibility to clone the prototype and return the cloned instance.</p>

<p>It is easily done using <code class="highlighter-rouge">Object.create</code> method.</p>

<p>Suppose we have the following object:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">rectanglePrototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="na">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="na">width</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="na">height</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="s1">'white'</span>
<span class="p">};</span>

<span class="c1">// Define some methods on our rectangle</span>
<span class="nx">rectanglePrototype</span><span class="p">.</span><span class="nx">getPerimeter</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">rectanglePrototype</span><span class="p">.</span><span class="nx">getArea</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Now, whenever you need to generate another <code class="highlighter-rouge">rectangle</code>, you create a new object based on the prototype of the <code class="highlighter-rouge">rectanglePrototype</code>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">newRectangle</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">rectanglePrototype</span><span class="p">);</span></code></pre></figure>

<p>Thus we make our newRectangle variable inherit everything from the <code class="highlighter-rouge">rectanglePrototype</code>, but we can easily overwrite some (or all) of its properties.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">newRectangle</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="nx">newRectangle</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">'orange'</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">newRectangle</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>      <span class="c1">// 100</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">newRectangle</span><span class="p">.</span><span class="nx">color</span><span class="p">);</span>  <span class="c1">// 'orange'</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">newRectangle</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>      <span class="c1">// 0</span></code></pre></figure>

<p>One might argue that there’s no real benefit in using this pattern, because there exist constructors that can easily generate another object instance:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">Rectangle</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">weight</span><span class="p">,</span> <span class="nx">height</span><span class="p">,</span> <span class="nx">color</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">weight</span> <span class="o">=</span> <span class="nx">weight</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">color</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">rect1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="s1">'red'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">rect2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rectangle</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">);</span></code></pre></figure>

<p>The above code is completely valid and it has a lot of potential use cases.</p>

<p>The Prototype Pattern, however, reveals its usefulness when objects are complex and you need the same object but with minor changes to it.</p>

<h2 id="real-world-use-case">Real world use case</h2>

<p>Imagine you write an app where a user can create a company with its departments, entities, point of sales and employees.</p>

<p>Suppose a point of sale is defined as follows:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">Entity</span> <span class="p">(</span><span class="nx">company</span><span class="p">,</span> <span class="nx">department</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">city</span><span class="p">,</span> <span class="nx">address</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">company</span> <span class="o">=</span> <span class="nx">company</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">department</span> <span class="o">=</span> <span class="nx">department</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">city</span> <span class="o">=</span> <span class="nx">city</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">address</span> <span class="o">=</span> <span class="nx">address</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">pointOfSale</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Entity</span><span class="p">(</span><span class="s1">'Universe Inc.'</span><span class="p">,</span> <span class="s1">'Sales'</span><span class="p">,</span> <span class="s1">'New York'</span><span class="p">,</span> <span class="s1">'Milky Way Shop'</span><span class="p">,</span> <span class="s1">'Local Group street, 54'</span><span class="p">)</span></code></pre></figure>

<p>The fields that do not change from one point of sale to another are <em>company, department and city</em> (suppose the company is small and operates in one city only).</p>

<p>You can create several different point of sales, but you’d have to provide the same company, department and city over and over. Instead, you can create a clone of <code class="highlighter-rouge">pointOfSale</code> whenever you need a new point of sale and change only the relevant properties. For this, a helper function can be created that will create the prototype for you and overwrite the required fields:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">createPointOfSale</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">address</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">newPointOfSale</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">pointOfSale</span><span class="p">);</span>
    <span class="nx">pointOfSale</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="nx">pointOfSale</span><span class="p">.</span><span class="nx">address</span> <span class="o">=</span> <span class="nx">address</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">newPointOfSale</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">posAndromeda</span> <span class="o">=</span> <span class="nx">createPointOfSale</span><span class="p">(</span><span class="s1">'Andromeda Shop'</span><span class="p">,</span> <span class="s1">'M31 street, 2.5mln lt.y.'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">posTriangulum</span> <span class="o">=</span> <span class="nx">createPointOfSale</span><span class="p">(</span><span class="s1">'Triangulum Shop'</span><span class="p">,</span> <span class="s1">'NGC 598 street, 3mln lt.y.'</span><span class="p">);</span></code></pre></figure>

<p>It’s easier now to create point of sales objects, but we can define the <code class="highlighter-rouge">clone</code> method on the prototype itself:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">pointOfSale</span><span class="p">.</span><span class="nx">clone</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">address</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">clone</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="nx">clone</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="nx">clone</span><span class="p">.</span><span class="nx">address</span> <span class="o">=</span> <span class="nx">address</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Now the prototype can clone itself.</span>
<span class="kd">var</span> <span class="nx">posSolarSystem</span> <span class="o">=</span> <span class="nx">pointOfSale</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="s1">'Solar Shop'</span><span class="p">,</span> <span class="s1">'Earth street, 42.000'</span><span class="p">);</span></code></pre></figure>

<p>Actually this is the approach described in “The Gang of Four” book on design patterns. But this is not the end. We can go even further and create a Prototype Manager.</p>

<p>A <strong>Prototype Manager</strong> is useful when a number of prototypes is dynamic in our app. Suppose that besides point of sales, the user wants to add another type of entities – its research and development teams. One way to do this is to create the prototype beforehand and use it in a similar manner with point of sales, but the downside of this approach is that you don’t know how many types of entities a user can have so you can’t hardcode all possible prototypes.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">entityPrototypeManager</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">prototypes</span><span class="p">:</span> <span class="p">{},</span>
    <span class="na">register</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">identifier</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span> 
        <span class="k">this</span><span class="p">.</span><span class="nx">prototypes</span><span class="p">[</span><span class="nx">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">;</span> 
    <span class="p">},</span>
    <span class="na">unregister</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">identifier</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span> 
        <span class="k">delete</span> <span class="k">this</span><span class="p">[</span><span class="nx">identifier</span><span class="p">];</span> 
    <span class="p">},</span>
    <span class="na">clone</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">identifier</span><span class="p">,</span> <span class="nx">propertiesToUpdate</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">propertiesToUpdate</span> <span class="o">=</span> <span class="nx">propertiesToUpdate</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="kd">var</span> <span class="nx">clone</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">prototypes</span><span class="p">[</span><span class="nx">identifier</span><span class="p">]);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">prop</span> <span class="k">in</span> <span class="nx">propertiesToUpdate</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">propertiesToUpdate</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">prop</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">clone</span><span class="p">[</span><span class="nx">prop</span><span class="p">]</span> <span class="o">=</span> <span class="nx">propertiesToUpdate</span><span class="p">[</span><span class="nx">prop</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">clone</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Register `pointOfSale` as a prototype</span>
<span class="nx">entityPrototypeManager</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s1">'pos'</span><span class="p">,</span> <span class="nx">pointOfSale</span><span class="p">);</span>

<span class="c1">// Clone the point of sale and override department, name and address</span>
<span class="kd">var</span> <span class="nx">researchEntity</span> <span class="o">=</span> <span class="nx">entityPrototypeManager</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="s1">'pos'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">department</span><span class="p">:</span> <span class="s1">'Research &amp; Development'</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'Machine Learning'</span><span class="p">,</span>
    <span class="na">address</span><span class="p">:</span> <span class="s1">'Big Data street, 1Pbyte'</span>
<span class="p">});</span>

<span class="c1">// Register our `researchEntity` as a prototype</span>
<span class="nx">entityPrototypeManager</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s1">'r&amp;d'</span><span class="p">,</span> <span class="nx">researchEntity</span><span class="p">);</span>

<span class="c1">// Clone the `r&amp;d` prototype and override its name</span>
<span class="kd">var</span> <span class="nx">newResearchEntity</span> <span class="o">=</span> <span class="nx">entityPrototypeManager</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="s1">'r&amp;d'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'Artificial Intelligence'</span>
<span class="p">});</span></code></pre></figure>

<p>The above snippet shows how you can clone an existing object, modify it and register as another available prototype on the <code class="highlighter-rouge">entityPrototypeManager</code>.</p>

<h2 id="wrapping-up-the-prototype-pattern">Wrapping up the Prototype Pattern</h2>

<p><strong>Why?:</strong> …</p>

<p><strong>Goal:</strong> Create new objects based on a prototype.</p>

<p><strong>Implementation:</strong> Define a way to clone a prototype or define a <code class="highlighter-rouge">clone()</code> method on the prototype itself that clones it and returns the created object. Additionally, you can have a <em>Prototype Manager</em> that holds a pool of available prototypes.</p>

<h2 id="gotchas">Gotchas:</h2>

<ul>
  <li><code class="highlighter-rouge">Object.create</code> creates a copy of an object, but all its properties are inherited. If you’ll change the prototype’s property, all cloned objects will have the updated property as well.</li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="p">{</span><span class="na">a</span><span class="p">:</span> <span class="mi">10</span><span class="p">};</span>
<span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>

<span class="nx">x</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">y</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span>  <span class="c1">// 20</span></code></pre></figure>

<p>This is a powerful feature of Javascript, but you need to be careful because it can cause unexpected behavior. In order to obtain a clone with own properties, you’ll need to write your own <code class="highlighter-rouge">clone</code> function instead of <code class="highlighter-rouge">Object.create</code>.</p>

<ul>
  <li><code class="highlighter-rouge">Object.create</code> accepts as the second argument an object that initializes object properties of the newly created object. Besides a property value, you can define whether it is enumerable, writable and/or configurable(deletable). You could make a prototype that has some properties that are not writable, so that the user cannot override them.</li>
</ul>

</article>






  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname  = 'programming-for-kettles';
    var disqus_identifier = '/design-patterns/2016/04/20/js-prototype-pattern';
    var disqus_title      = 'Prototype Pattern';

    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>






      </div>
    </div>
  </div>

  <footer class="center">
  <div class="measure">
    <small>
      Theme crafted with &lt;3 by <a href="http://johnotander.com">John Otander</a> (<a href="https://twitter.com/4lpine">@4lpine</a>).<br>
      &lt;/&gt; available on <a href="https://github.com/johnotander/pixyll">Github</a>.
    </small>
  </div>
</footer>

</body>
</html>
